\documentclass[Methods]{subfiles}
\begin{document}
\section{Methods}
\label{sec:Methods}

In order to find the overhead Naxsi has when it is actively used as a \ac{WAF}, it is important to create a baseline reference to compare the results to. First, the performance is measured when there is processing of any application data taken place. This is done by returning HTTP 200 OK message to the client. This way there is a minimal overhead and this makes it possible to isolate Naxsi as much as possible. Second, the performance is measure with a default Wordpress installation. In both cases, the performance is measured first with Naxsi being disabled and later with Naxsi enabled.

Before both scenarios are discussed in more depth, it is important to understand how the basic configuration is setup. A configuration for standard web hosting that is seen quite often, is to separate the web hosting services on a functional basis. First, there is the web server, this the front-end from a client's perspective. Second, there is application layer. The application layer takes care of most of the processing power that is needed to process all the data. Third, there is the data layer, which is often a database server. It is not necessary to separate these layers over different servers. Depending on the requirements, it is possible to host all services on one server. In order to do a performance measurement on one of these services, it is important that not all services run on the same server. Therefore, in this setup, every layer has a dedicated server. In the next section the setup is discussed more in depth.

\subsection{Experimental setup}

Figure \ref{fig:Experimental setup} shows the setup that is used during the experiments. Table \ref{tab:Experimental infrastructure} gives a short description of each server and the service(s) that run(s) on it. Server01 is the front-end server, but it will also act as a software router for basic communication with the servers behind it. Server02 processes all the application data, which for a large part consists of the processing of PHP code. The hardware specification and the software that is used, can be found in appendix \ref{sec:Experimental setup}.

\begin{figure}[h]
\caption{Experimental setup}
\centering
\includegraphics[scale=0.4] {images/infrastructure.png}
\label{fig:Experimental setup}
\end{figure}

\begin{table}[h]
\caption{Experimental infrstructure}
\begin{tabular}{|p{2,5cm}|p{3,5cm}|p{5cm}|}
\hline
\textbf{Hostname} & \textbf{Service} & \textbf{Short description} \\ \hline
server01 & Nginx + Naxsi & Front-end server and router \\ \hline
server02 & Nginx + Fastcgi & Application layer \\ \hline
server03 & MySQL & Data layer \\ \hline
server04 & Benchmark tools & Performance measurement \\ \hline
server05 & Collectd & Performance data collector \\ \hline
\end{tabular}
\label{tab:Experimental infrastructure}
\end{table}

\subsection{Performance measurement tools}
A variety of performance measurement tools (also called benchmarking tools) exist. However not all of them are suited to perform tests in this specific experimental setup while also not influencing the measurement. This section discusses a selection of tools. The sections of those that have in fact been used, specify the way they were set up.

\subsubsection{Apache Benchmark}
\input{methods_tools_apachebenchmark}

\subsubsection{Httperf}
%\input{methods_tools_httperf}

\subsubsection{Autobench}
\input{methods_tools_autobench}

\subsubsection{Collectd}
\input{methods_tools_collectd}

\subsubsection{Raw Naxsi performance test}

\subsubsection{Naxsi performance test with back-end server}
Based on the \ac{CMS} popularity measurements of March 1st by w3techs \footnote{\url{http://w3techs.com/technologies/overview/content_management/all}}, Wordpress is chosen as the web application. According to their survey, 17,4 \% of all web servers run Wordpress and it holds 54,6 \% of the CMS market share. Wordpress has, by far, the greatests market share and is therefore a popular target for cyber criminals.
\end{document}

